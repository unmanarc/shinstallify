# SHinstallify 

 A tool for creating script to backup/restore config/files/dir's on *nix with bash
  
Author: Aaron Mizrachi (unmanarc) <aaron@unmanarc.com>   
License: GPLv3   

***

## Purporse:

We frequently create configurations on our servers and need to transform them into a format that we can use to restore them. In that case, the most common and accepted strategy is to use `tar`, which will record all the information in a standard and compatible format.

However, we do not always have access to some file transfer mechanism to get the configuration files, eg. sometimes we are pivoting on a host bastion, and it complicates exfiltration of the file or even complicates putting the file in its place on the new server.

That is why transforming these files into a bash file that can be copied/&/pasted through the SSH console can be very useful.

Bash is in almost every *nix server these days, so the compatibility should be transparent.

## Installation:

### Traditional (With Internet):

You can download the latest sh file with wget (or cloning this repo):

```
wget https://raw.githubusercontent.com/unmanarc/shinstallify/master/shinstallify.sh
chmod +x ./shinstallify.sh
```

### Or.. Copy-Paste (shinstallifyception):

Generated by shinstallify ;-)

```
cat << 'EOF-8HXPF29X' | base64 -d | gunzip - | install -m '775' -o 'user' -g 'user' /dev/stdin 'shinstallify.sh'
H4sIAAAAAAAAA81WUW/bNhB+16+4Kl4sd5GddMOwJXEwp3HSAGkc2HGKbegDLdEWEZkUSMqui/z4
3VGyHCdKlwLDMD9YFHXkfffd8TvuvOlMhOxMmEk8764/HF0Orrv+fvvA93ZggU+YCm0saJ5yZjgE
c7aCSEnLhIRJPjMtzxuMb88vr/rdTswXHWNjlVtv2Ls+G90Ou40gYhbcl1wzGas5PIDVEMYRNHvh
n/vhb02cmao0hnAJv+I44QzHEg5w62UiUg4zblVmDfh6slCHiQ+Dm1vEeQSx8gB/ESFrFJMgpJvT
Lfeg37B/1bu9vOt3D6qpoyM3nGyMTi+ve8M/npssNiZIz+lgVLON2tisufAJTm944T+1TTa29ONR
osAfGzbjh+A/+1Rj2//C5lmK1o19CBV07DzrCGksS1Ou2yaBDrdRZ76aEnNuHAtdDTpvX+VkkFmh
pDl8bgx+OKHxGCnHymGaymGeaW4Mj2GuYo7J1EDeDQSzryL7EYuL//Jzq3YvTeMRW3A4dyuWwiZg
E04Fx6zA+YzhTKBwTi8FOl2KNIXckAVL6WP9xguXVA53XE8UWqspcBYlsNTCWi4dwNqFyqUxt1lu
oeIVAjEFqSyYjEdiKni8VwCZaTYBq6Ao+3ooiYsxUUsMTBis7zR7VRLeYwZEzDV7ORcAIZyuENly
D3KJBBpYqRyY5kiRkDNHJSYsKFLVgmnKZnsFDod/goQqfU+meMAX9GQg+TJMhazlh0Z4ovmCY+Zn
XBI8TDzR2X4J4SfyROxpHuUakyEkUobVyCOrtOBmr6b0C1cUjUlUjvJQUL8q0rhevCr1CaWFYpX0
J8ryq8FT46WX20TpQ+gxrSR8FF817i/gmNH777mcM2QuamORn9SBvBIRlwaP48XN1eKnOgusQIMJ
xANb6usToy/CwjNJebuRiWKXSxkpTTGDKs4mZFotsDzizXb1W3HDIi9Wknso6RfcUrk6cWB6ls+5
tKbdbnsmEVMLjSBwOnp9hmk7aKECY93/hdpayBq86YL/SOZ9+Ay7u2gQ8o3N5yOXCef7ZPddiX8H
3uPJExFLIShPVwEixXMcrwi7sXvAJkpbrMLWYbVhEZ+L7Z03FRTFGZ+yPLWuVaDoeaWLTS/z4aRa
v+4iGNpOq+WahtvRRfaGoPuNA38L9lPon5iWdDQCEilXyVOVy5hAHmzodxRWb9Qkhcy5myDY9CQ8
N73bD90NAr+x7k8+ILs1SKpF/tobTw2v+xysNRFCg9BKOVo7J3eYqit0uV6Dzp5624ErIe+heieE
ZeerAFLSg+3cckZpA7Oao3LcIzGVi6eVnEpC13RgYzLe2LaaOL9+aWISH2WxiLuMIf52DN+HudKS
etTjUZ/uMdgJLIR4a/lh3HyEuDK7GA7GN1t2F7V2N/3hx9GWHau1K2CWHQjCOTLjljap6zcbhAqH
Mxw6z00i5XXkTf9N8ugQ/694Kw9VcZ976UhtCKbr6fExNPuD87BR3lrpRlpcWojUB5jlEu8xqIgP
8B35WOskXpS/mZdKMBBJZUdeyWcFpHbZlg78c0z/Gfg6K1ShLZS18RQ33Eew68r4UcxbNdnXGm+e
wViaPMuwjZTXErCrjLee1+haFgvZLhrkequzwXW/ve3bcx1o/+hve7sqPjINAAA=

EOF-8HXPF29X
```

## Usage:

```
# ./shinstallify.sh -h

Usage: 

Example: ./shinstallify.sh -o /tmp/installer.sh /etc/myfile /etc/dir /etc/dir/*

Options:
-b    Use binary compressed mode for files (gzip+base64)
-r    Save Files with the relative path (otherwise will use realpath)
-v    Be Verbose of each written file
-o    Output installer (if not specified, will grab to stdout)
-h    Show this help

Considerations:
  - By now, unless you are using the -b (binary) flag, this will be working leaving a new-line 
    at every generated file.
  - Will not recurse into directories, 
    you should specify each directory first and then their files.

Author: Aaron Mizrachi <aaron@unmanarc.com>
License: GPLv3
Version: 0.1
```

## Disclaimer:

THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

### Bug reports:

This is in a very alpha status, which means that may contain a lot of bugs, please if you found one report it via github.
