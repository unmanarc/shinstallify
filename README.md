# SHinstallify 

 A tool for creating script to backup/restore config/files/dir's on *nix with bash
  
Author: Aaron Mizrachi (unmanarc) <aaron@unmanarc.com>   
License: GPLv3   

***

## Purporse:

We frequently create configurations on our servers and need to transform them into a format that we can use to restore them. In that case, the most common and accepted strategy is to use `tar`, which will record all the information in a standard and compatible format.

However, we do not always have access to some file transfer mechanism to get the configuration files, eg. sometimes we are pivoting on a host bastion, and it complicates exfiltration of the file or even complicates putting the file in its place on the new server.

That is why transforming these files into a bash file that can be copied/&/pasted through the SSH console can be very useful.

Bash is in almost every *nix server these days, so the compatibility should be transparent.


## Usage:

```
# ./shinstallify.sh -h

Usage: 

Example: ./shinstallify.sh -o /tmp/installer.sh /etc/myfile /etc/dir /etc/dir/*

Options:
-x    Use hex binary compressed mode for files (gzip+xxd)
-b    Use binary compressed mode for files (gzip+base64)
-r    Save Files with the relative path (otherwise will use realpath)
-v    Be Verbose of each written file
-o    Output installer (if not specified, will grab to stdout)
-h    Show this help

Considerations:
  - By now, unless you are using the -b (binary) flag, this will be working leaving a new-line 
    at every generated file.
  - Will not recurse into directories, 
    you should specify each directory first and then their files.

Author: Aaron Mizrachi <aaron@unmanarc.com>
License: GPLv3
Version: 0.1
```

## Installation:

### Method 1: Traditional (Download with Internet):

You can download the latest sh file with wget (or cloning this repo):

```
wget https://raw.githubusercontent.com/unmanarc/shinstallify/master/shinstallify.sh
chmod +x ./shinstallify.sh
```

### Method 2: Or.. Copy-Paste using b64 (shinstallifyception):

Generated by shinstallify ;-)

```
cat << 'EOF-FLMGOMP3' | base64 -d | gunzip - | install -m '755' /dev/stdin 'shinstallify.sh'
H4sIAAAAAAAAA81XbW/bNhD+7l9xVbxa7iI7aYdhS5piTuOmAdI4cOK227APtERbRGVSICm/FPnx
u6Ne/BKlTYBhmz9EFHW8e+7tOWbvWXcsZHfMTNxofOwPby4GVyfeQefQa+zBHJ8wEdpY0DzhzHDw
Z2wFoZKWCQnjbGrajcZgdPvu4rJ/0o34vGtspDLbGPauzm5uhydNP2QW3JdMMxmpGdyB1RBEIbR6
wR8Hwa8t3JmoJIJgAb/gOuYM1xIOUfUiFgmHKbcqtQY8vRzP1VHsweD6FoEeQ6QagL+QoDXzTRDS
7em2e9Bv2L/s3V587J8cVlvHx245XgudXlz1hr/fF1muRT5/Prv/fb7+jvE7HdzUmFFrmTJYHsHt
Dc+9Xdl4LUs/HsYKvJFhU34E3r1PNbL9JZulCUo3DyBQ0LWztCuksSxJuO6YGLrcht3ZakKhdetI
6GrRffEoI4PUCiXN0X1h8IIlrUeYkpgvAcuLaaqZWaq5MTyCmYo4ZlwDITDgT7+K9MflMmrXKhuX
yh6pCEuZ//xTvS5N6xs25/DOnVgIG4ONOZU3swL3U4Y7vsI9vRBodCGSBDJDEiyhj/WK57Q+5fCR
67FCaTUBzsIYFlpYy6UDWHtQuZrIbJpZqJIEvpiAVBZMykMxETzaz4FMNRuDVZA3WT2U2PkYqwU6
JgymIEkfldG3mE4Rcc0eTixAAKcrRLbYh0xiAA2sVAZMcwyRkFMXSkyYn6eqDZOETfdzHA7/GAOq
9BcSRTqZ05OB5IsgEbI2PrRC/uBzjpmfcknwMPEUzs5DCD+RJYqe5mGmMRlCYsiwtHlolRbc7Nf0
UW6KvDGxypCM8tCv8jSWh1cFGyKRka+S/oii/Grw1FjpZTZW+gh6TCsJH8RXjfoFvGb0/lsmZwwj
F3awyN/UgbwUIZcGe/v8+nL+qk4CK9BgArH7CzbfEVoKC/f46cWac3ItFzJUmnwGlTc6pFrNsTyi
tbp6VdywsBEpyRs4QM65pXJ1TMP0NJtxaU2n02mYWEwsNH3fkfbVGabtsI18j3X/J3hNJFoPTsA7
9OAveP7c7eX8XG0fuwQ4k2+evyxg78FbbDgRsgT8t7GiThxzu+CYKSQlJIpgvO9KY4wd3sYsjJW2
WIUIKffL+fSqMREFlGZB1/AMzW7MtwpXwNcy38dUNHoejwQpJVqRSWP3gRVQEFWpcAPSSwdpD874
hGWJdTMSybxRmFgPcQ/eVOfL8YlR3mu33bB0Gp1nzwi619wJ5S70T0xL6lKf+NJFbqIyGRHIw3Ul
uGxWb3Q7EDLjboNg05PwXPdu35+sEXjNci7XJXXrkFda44nhdZ/9kp4hMAitYMbSOJnDVF2iyfIM
Gtu1tgeXQn6B6p0QFhN9qxj97dxyRmkDs5ohiX3BwFQmdpsqkYSu5cBGJLyWbbdwv3xpYRI3spj7
XfgQfduHp2GuaK0e9eimTxc4HEoWAryu/TBqbSCuxM6Hg9H1ltx5rdx1f/jhZkuO1crlMIthCMEM
I+OOtug202oSKlxOcekstygojwve5J8MHjXx/ypuRVM9zJPbAaZ7+evX0OoP3gXN4rpOV/H8/kRB
vYNpJvFKheR8B0/IR8mT+B/CN/NSEQYiqeTIKtmsgNQey1O6Myme7CreOSFA9/R/7WoB5AFXNyjv
+z79a+DrpJBwt1DW+pP/k7IBu65jN3zear++1jjG/ZE0WZrixCwug2BXKW/fb8dyAuQTKr+WlKrO
Blf9zrbthhu2B8d/Aw8AQTIWDwAA

EOF-FLMGOMP3
```

### Method 3: Or... Copy-Paste using xxd (shinstallifyception):

Generated by shinstallify ;-)

```
cat << 'EOF-NAHCCA6H' | xxd -p -r | gunzip - | install -m '755' /dev/stdin 'shinstallify.sh'
1f8b0800000000000003cd576d6fdb3610feee5f7155bc5aee223b698761
4b9a624ee3a601d23870e2b6dbb00fb4445b4465522029bf14f9f1bba35e
fc12a54d80619b3f441475bc7beeed3966ef59772c6477cc4cdc687cec0f
6f2e065727de41e7d06becc11c9f3011da58d03ce1cc70f0676c05a19296
0909e36c6ada8dc66074fbeee2b27fd28df8bc6b6ca432db18f6aece6e6e
87274d3f6416dc974c3319a919dc81d5104421b47ac11f07c1af2ddc99a8
24826001bfe03ae60cd7120e51f52216098729b72ab5063cbd1ccfd551ec
c1e0fa16811e43a41a80bf90a035f34d10d2ede9b67bd06fd8bfecdd5e7c
ec9f1c565bc7c76e395e0b9d5e5cf586bfdf1759ae453e7f3ebbff7dbefe
8ef13b1ddcd498516b9932581ec1ed0dcfbd5dd9782d4b3f1ec60abc9161
537e04debd4f35b2fd259ba5094a370f2050d0b5b3b42ba4b12c49b8ee98
18badc86ddd96a42a175eb48e86ad17df1282383d40a25cdd17d61f08225
ad479892982f01cb8b69aa9959aab9313c82998a38665c032130e04fbf8a
f4c7e5326ad72a1b97ca1ea9084b99fffc53bd2e4deb1b36e7f0ce9d5808
1b838d399537b302f753863bbec23dbd1068742192043243122ca18ff58a
e7b43ee5f091ebb142693501cec218165a58cba503587b50b99ac86c9a59
a89204be988054164cca4331113cdacf814c351b83559037593d94d8f918
ab053a260ca620491f95d1b7984e1171cd1e4e2c4000a72b44b6d8874c62
000dac54064c730c919053174a4c989fa7aa0d93844df7731c0eff1803aa
f41712453a99d39381e48b2011b2363eb442fee0738e999f7249f030f114
cece43083f91258a9ee661a631194262c8b0b479689516dcecd7f4516e8a
bc31b1ca908cf2d0aff234968757051b229191af92fe88a2fc6af0d458e9
653656fa087a4c2b091fc4578dfa05bc66f4fe5b26670c231776b0c8dfd4
81bc142197067bfbfcfa72feaa4e022bd06002b1fb0b36df115a0a0bf7f8
e9c59a73722d1732549a7c0695373aa45acdb13ca2b5ba7a55dcb0b01129
c91b3840ceb9a572754cc3f4349b71694da7d36998584c2c347ddf91f6d5
19a6edb08d7c8f75ff27784d245a0f4ec03bf4e02f78fedcede5fc5c6d1f
bb0438936f9ebf2c60efc15b6c3811b204fcb7b1a24e1c73bbe098292425
248a60bcef4a638c1ddec62c8c95b658850829f7cbf9f4aa311105946641
d7f00ccd6eccb70a57c0d732dfc754347a1e8f0429255a914963f7811550
1055a97003d24b07690fcef8846589753312c9bc5198580f710fde54e7cb
f18951de6bb7ddb0741a9d67cf08bad7dc09e52ef44f4c4bea529ff8d245
6ea2321911c8c37525b86c566f743b1032e36e8360d393f05cf76edf9fac
1178cd722ed72575eb90575ae389e1759ffd929e213008ad60c6d23899c3
545da2c9f20c1adbb5b60797427e81ea9d1016137dab18fdeddc72466903
b39a21897dc1c05426769b2a9184aee5c04624bc966db770bf7c69611237
b298fb5df8107ddb87a761ae68ad1ef5e8a64f17381c4a1602bcaefd306a
6d20aec4ce8783d1f596dc79addc757ff8e1664b8ed5cae5308b6108c10c
23e38eb6e836d36a122a5c4e71e92cb728288f0bdee49f0c1e35f1ff2a6e
45533dcc93db01a67bf9ebd7d0ea0fde05cde2ba4e57f1fcfe4441bd8369
26f14a85e47c074fc847c993f81fc237f352110622a9e4c82ad9ac80d41e
cb53ba33299eec2ade392140f7f47fed6a01e401573728effb3efd6be0eb
a49070b750d6fa93ff93b201bbae63377cde6abfbed638c6fd9134599ae2
c42c2e836057296fdf6fc77202e4132abf9694aace0657fdceb6ed861bb6
07c77f030f004132160f0000

EOF-NAHCCA6H
# DONE.
```


## Disclaimer:

THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

### Bug reports:

This is in a very alpha status, which means that may contain a lot of bugs, please if you found one report it via github.
